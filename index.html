<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <title>Discord Webhook</title>
</head>
<body>
  <form class="report">
      <h1>Daily report</h1>
      <label for="date">üìÖ Date: </label>
      <input type="date" id="date">
      <div class="report__wrapper">
        <h2>‚úÖWhat I did yesterday:</h2>
        <label for="yesterday-date">Date:</label>
        <input type="date" id="yesterday-date" class="date_yesterday">
        <ul class="tasks">
            <li class="tasks__item">
                <div>
                    <textarea name="" id="first-yesterday-task-description" cols="40" rows="5">First task description</textarea>
                </div>
                <label for="first-task">Deadline:</label> <input type="date" id="first-task">
                <p>Priority:</p>
                <div class="Priority">
                    <input type="radio" id="High" name="priority-yesterday" value="High"/>
                    <label for="High">High</label>
                  </div>
                
                  <div>
                    <input type="radio" id="Medium" name="priority-yesterday" value="Medium" checked />
                    <label for="Medium">Medium</label>
                  </div>
                
                  <div>
                    <input type="radio" id="Low" name="priority-yesterday" value="Low" />
                    <label for="Low">Low</label>
                  </div>
            </li>
        </ul>
        <ul class="report__meetings">
            <h3>üë•Met with:</h3>
            <li class="report__meeting">
                <label for="first-yesterday-meeting-person">Name and Position / Team</label>
                <input type="text" id="first-yesterday-meeting-person" placeholder="Ruslana COO"> 
                <label for="first-yesterday-meeting-cst">Time CST:</label>
                <input type="time" id="first-yesterday-meeting-cst">
                <label for="first-yesterday-meeting-eet">Time EET:</label>
                <input type="time" id="first-yesterday-meeting-eet">
                <textarea name="" id="first-yesterday-meeting-brief" cols="40" rows="5">Brief description of the meeting topic</textarea>
            </li>
            <li class="report__meeting">
                <label for="second-yesterday-meeting-person">Name and Position / Team</label>
                <input type="text" id="second-yesterday-meeting-person" placeholder="Ruslana COO"> 
                <label for="second-yesterday-meeting-cst">Time CST:</label>
                <input type="time" id="second-yesterday-meeting-cst">
                <label for="second-yesterday-meeting-eet">Time EET:</label>
                <input type="time" id="second-yesterday-meeting-eet">
                <textarea name="" id="second-yesterday-meeting-brief" cols="40" rows="5">Brief description of the meeting topic</textarea>
            </li>
        </ul>
      </div>
      <div class="report__wrapper">
        <h2>üìåWhat I will do today:</h2>
        <ul class="tasks">
            <li class="tasks__item">
                <div>
                    <textarea name="" id="first-today-task-description" cols="40" rows="5">First task description</textarea>
                </div>
                <label for="first-today-task-deadline">Deadline:</label> <input type="date" id="first-today-task-deadline">
                <p>Priority:</p>
                <div class="Priority">
                    <input type="radio" id="High-today" name="priority-today" value="High" checked />
                    <label for="High-today">High</label>
                  </div>
                
                  <div>
                    <input type="radio" id="Medium-today" name="priority-today" value="Medium" />
                    <label for="Medium-today">Medium</label>
                  </div>
                
                  <div>
                    <input type="radio" id="Low-today" name="priority-today" value="Low" />
                    <label for="Low-today">Low</label>
                  </div>
            </li>
            
        </ul>
        <ul class="report__meetings">
            <h3>üë•Meeting with:</h3>
            <li class="report__meeting">
                <label for="first-today-meeting-person">Name and Position / Team</label>
                <input type="text" id="first-today-meeting-person" placeholder="Ruslana COO"> 
                <label for="first-today-meeting-cst">Time CST:</label>
                <input type="time" id="first-today-meeting-cst">
                <label for="first-today-meeting-eet">Time EET:</label>
                <input type="time" id="first-today-meeting-eet">
            </li>
            <li class="report__meeting">
                <label for="second-today-meeting-person">Name and Position / Team</label>
                <input type="text" id="second-today-meeting-person" placeholder="Ruslana COO"> 
                <label for="second-today-meeting-cst">Time CST:</label>
                <input type="time" id="second-today-meeting-cst">
                <label for="second-today-meeting-eet">Time EET:</label>
                <input type="time" id="second-today-meeting-eet">
            </li>
        </ul>
      </div>
      <div class="blockers">
        <h3>‚õîÔ∏èBlockers:</h3>
        <textarea name="" id="blockers" cols="40" rows="5">None</textarea>
      </div>
      <a href="https://docs.google.com/document/d/11sqd6GyqTMoch-a5z6dAFRVII0nmgxj_m1EeZ2yNVQY/edit#heading=h.ac36khbgswt8">Documentation on daily reports</a>
      <p>Click on these two buttons one by one to send the report</p>
      <button type="submit" id="submitBtn" style="display: block;">Submit</button>
  </form>
  <button onclick="sendMessage()">Send</button>

  <script>
    let ReportDate;
    let YesterdayDate;
    let firstYesterdayTaskDescription;
    let firstYesterdayTaskDeadline;
    let firstYesterdayTaskPriority;
    let firstYesterdayMeetingPerson;
    let firstYesterdayMeetingTimeCST;
    let firstYesterdayMeetingTimeEET;
    let firstYesterdayMeetingTimeBrief;
    let secondYesterdayMeetingPerson;
    let secondYesterdayMeetingTimeCST;
    let secondYesterdayMeetingTimeEET;
    let secondYesterdayMeetingTimeBrief;

    let firstTodayTaskDescription;
    let firstTodayTaskDeadline;
    let firstTodayTaskPriority;
    let firstTodayMeetingPerson;
    let firstTodayMeetingTimeCST;
    let firstTodayMeetingTimeEET;
    let secondTodayMeetingPerson;
    let secondTodayMeetingTimeCST;
    let secondTodayMeetingTimeEET;

    let blockers;

    const submitBtn = document.getElementById('submitBtn');
    submitBtn.addEventListener('click', function(e){
        e.preventDefault();
        ReportDate = document.getElementById('date').value;
        YesterdayDate = document.getElementById('yesterday-date').value;
        firstYesterdayTaskDescription = document.getElementById('first-yesterday-task-description').value;
        firstYesterdayTaskDeadline = document.getElementById('first-task').value;
        const priorityYesterday = document.querySelector('input[name="priority-yesterday"]:checked');
        firstYesterdayTaskPriority = priorityYesterday ? priorityYesterday.value : '';
        firstYesterdayMeetingPerson = document.getElementById('first-yesterday-meeting-person').value;
        firstYesterdayMeetingTimeCST = document.getElementById('first-yesterday-meeting-cst').value;
        firstYesterdayMeetingTimeEET = document.getElementById('first-yesterday-meeting-eet').value;
        firstYesterdayMeetingTimeBrief = document.getElementById('first-yesterday-meeting-brief').value;

        firstTodayTaskDescription = document.getElementById('first-today-task-description').value;
        firstTodayTaskDeadline = document.getElementById('first-today-task-deadline').value;
        const priorityToday = document.querySelector('input[name="priority-today"]:checked');
        firstTodayTaskPriority = priorityToday ? priorityToday.value : '';
        firstTodayMeetingPerson = document.getElementById('first-today-meeting-person').value;
        firstTodayMeetingTimeCST = document.getElementById('first-today-meeting-cst').value;
        firstTodayMeetingTimeEET = document.getElementById('first-today-meeting-eet').value;
        secondTodayMeetingPerson = document.getElementById('second-today-meeting-person').value;
        secondTodayMeetingTimeCST = document.getElementById('second-today-meeting-cst').value;
        secondTodayMeetingTimeEET = document.getElementById('second-today-meeting-eet').value;

        blockers = document.getElementById('blockers').value;
    })

    async function sendMessage() {
      const webhookUrl = "https://discord.com/api/webhooks/1228434792811462708/jfwBSx-jw6yq1SDJKX1jFz5ys538L1r37PQNpPXPgiu5WaJuGIoh7xoES4P9KDZ5wagr";
      
      const payload = {
        content: `üìÖ Date: ${ReportDate} \n\n‚úÖWhat I did yesterday ${YesterdayDate}:\n\n- ${firstYesterdayTaskDescription}\n> Deadline: ${firstYesterdayTaskDeadline}\n> Priority: ${firstYesterdayTaskPriority}\n\nüë•Met with: \n${firstYesterdayMeetingPerson} üïí ${firstYesterdayMeetingTimeCST}, CST / ${firstYesterdayMeetingTimeEET}, EET \n> ${firstYesterdayMeetingTimeBrief}\n\nüìåWhat I will do today:\n\n- ${firstTodayTaskDescription}\n> Deadline: ${firstTodayTaskDeadline}\n> Priority: ${firstTodayTaskPriority}\n\nüë•Meeting with:\n${firstTodayMeetingPerson} üïí ${firstTodayMeetingTimeCST}, CST / ${firstTodayMeetingTimeEET}, EET \n\n${secondTodayMeetingPerson} üïí ${secondTodayMeetingTimeCST}, CST / ${secondTodayMeetingTimeEET}, EET \n\n‚õîÔ∏èBlockers: ${blockers}\n[Documentation on daily reports](https://docs.google.com/document/d/11sqd6GyqTMoch-a5z6dAFRVII0nmgxj_m1EeZ2yNVQY/edit#heading=h.ac36khbgswt8)`,
      };

      try {
        const response = await fetch(webhookUrl, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(payload),
        });

        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
      } catch (error) {
        console.error('There has been a problem with your fetch operation:', error);
      }
    }
  </script>
</body>
</html>
